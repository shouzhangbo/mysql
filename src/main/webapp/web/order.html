<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>订单页面</title>
<link rel="stylesheet" type="text/css" href="../css/index.css"/>
<link rel="stylesheet" type="text/css" href="../css/public.css"/>
<link rel="stylesheet" type="text/css" href="../css/product_info.css"/>
</head>
<body>
<ul class="fix-left-ul">
		<li>
			<div class="fix-left-ul-txt hide fl">购物车</div>
			<div class="fix-p fr shopbar"><p></p></div>
			<div class="shopbar-mount">0</div>
		</li>
		<li>
			<div class="fix-left-ul-txt hide fl">购物车</div>
			<div class="fix-p fr"><p></p></div>
		</li>
		<li>
			<div class="fix-left-ul-txt hide fl">购物车</div>
			<div class="fix-p fr"><p></p></div>
		</li>
		<li>
			<div class="fix-left-ul-txt hide fl">购物车</div>
			<div class="fix-p fr"><p></p></div>
		</li>
	</ul>
	
	<!--头部-->
	<div class="head" id="head">
		<span class="fl ml-10 un-login"><a href="login.html">登录</a><a class="ml-10" href="resiger.html">注册</a></span>
        <span class="fl ml-10 ag-login hide">欢迎你，<a class="user-txt" href="javascript:;">houzhangbo</a><a class="ml-10 tuichu" href="javascript:;">退出</a></span>
        
        <span class="fr ">
        	<ul class="head-ul">
            	<li><a href="">我的账户</a></li>
                <li><a href="">我的订单</a></li>
                <li><a href="">我的收藏</a></li>
                <li><a href="">我的购物车</a></li>
            </ul>
       </span>
	</div>
    <!--中间主要内容-->
	<div class="main">
    	<!-----logo和搜索----->
    	<div class="main-sort">
			<div class="sort-logo fl">这是网站的logo</div>
			
			<div class="sort-input fl">
				<ul class="sort-up"><li class="ok">商品</li><li>品牌</li></ul>
				<input type="text" class="sort-input-txt" />
				<input type="button" class="sort-input-btn" value="搜索" />
				<ul class="sort-down"><li class="ok">热门搜索</li><li><a href="">热门</a></li><li><a href="">热门</a></li><li><a href="">热门</a></li><li><a href="">热门</a></li><li><a href="">热门</a></li></ul>
			</div>
			<div class="sort-shopcar fr">
				我的购物车 >
			</div>
			<div class="shopcar-mount"><span></span><span class="mount">1</span></div>
			<div class="shopcar-content">
				<div class="shopcar-title">最近添加的</div>
				<div class="shopcar-content-emp hide">
					还是空的！
				</div>
				<ul>
					<!----->
					<li><span>12</span><span>1111111</span><a class="ml-10 shop-dele" href="javascript:;">删除</a></li>
					<li><span>12</span><span>1111111</span><a class="ml-10 shop-dele" href="javascript:;">删除</a></li>
					<li><span>12</span><span>1111111</span><a class="ml-10 shop-dele" href="javascript:;">删除</a></li>
					
				</ul>
			</div>
         </div>
         <div class="cl"></div>
         <!--中间 导航-->
		<div class="main-nav">
			<div class="nav-main">
				<div class="nav-main-all fl font14">全部分类</div>
				<ul class="nav-main-nav ">
					<li><a href="">分类1</a></li>
					<li><a href="">分类1</a></li>
					<li><a href="">分类1</a></li>
					<li><a href="">分类1</a></li>
				</ul>
			</div>
		</div>
        <!----商品内容  淘宝双飞翼布局---->
        <div class="product_info">
        	<h2 class="mt-10 mb-10">订单信息</h2>
        	<div class="order-main-txt">
            	<div class="receive-addres">
                	收件人信息：
                	<table class="add-revece">
                		<tbody>
	                		<tr>
		                		<td>省份:</td>
		                		<td><select class="prvience"><option>山东</option><option>北京</option></select>
		                		<select class="city"><option>济南</option></select>
		                		<select class="city-qu"><option>市中区</option><option>天桥区</option></select>
		                		</td>
	                		</tr>
	                		<tr><td>详细地址:</td><td><input type="text" class="ress-xiangxi" /></td></tr>
	                		<tr><td>收件人:</td><td><input type="text" class="reveice-man" /></td></tr>
	                		<tr><td>收件人电话:</td><td><input type="text" class="reveice-phone" /></td></tr>
	                		<tr><td><input type="button" class="add-ress" value="添加" /></td></tr>
                		</tbody>
                	</table>
                    <ul  class="ml-10 receive-li hide">
                    	<li>
                        	<span class="fl ">收货地址1</span>
							<div class="fl ml-10">
                            	<span class="receive-man">侯张波</span>
                                <span class="address-street">北京 朝阳区 五环到六环之间</span>
                                <span class="address-info">朝阳区定福庄福盈家园1号院</span>
                                <span class="receive-phone">188****3133</span>
                            </div>
                        </li>
                    </ul>
                    <div class="orther-rece">选择其他的地址</div>
                    <input type="button" class="new-address hide" value="新增地址" />
                </div>
                
                <div class="pay-stle mt-10">
                	支付方式：
                    <ul  class="ml-10 order-pay">
                    	<li class="ok">
                        	<span class="fl ">在线支付</span>
                        </li>
                        <li>
                        	<span class="fl ">货到付款</span>
                        </li>
                    </ul>
                </div>
                
                <div class="pro-list mt-10">
                	<table class="" width=100%>
                    	<tr>
                        	<td>送货清单：</td>
                        </tr>
                        <tr>
                        	<td></td>
                            <td>
                            	<img src="../images/proImg2.jpg" class="fl pro-list-img" />
                                <div class="fl">
                                    <p><a href="">明基（BenQ）TH682ST投影仪 全高清</a></p>
                                    <p>7天无理由退货</p>
                                </div>
                            </td>
                            <td><span class="">￥120.00</span></td>
                            <td><span class="">X2</span></td>
                            <td><span class="">有货</span></td>
                        </tr>
                    </table>
                	
                </div>
                
            </div>
            
            <div class="">
            	<input type="text" value="添加你的备注，默认无" />
            </div>
            
            <div class="order-count">
            	<table class="fr">
                	<tr>
                    	<td align=right>共<span>6</span>件商品，总金额：</td>
                        <td>￥1900.00</td>
                    </tr>
                    <tr>
                    	<td align=right>优惠：</td>
                        <td>￥0.00</td>
                    </tr>
                    <tr>
                    	<td align=right>运费：</td>
                        <td>￥5.00</td>
                    </tr>
                    <tr>
                    	<td align=right>应付：</td>
                        <td>￥1900.00</td>
                    </tr>
                </table>
            </div>
            <div class="cl"></div>
            <div class="order-addres">
            	<table class="fr">
                	<tr>
                    	<td align=right>配送至：</td>
                        <td>北京市xxxxxxx</td>
                    </tr>
                    <tr>
                    	<td align=right>收货人：</td>
                        <td><span class="">侯张波</span><span class="">188****3113</span></td>
                    </tr>
                </table>
            </div>
            <div class="cl"></div>
            <input type="button" class="fr mt-10 btn btn-red btn-sub" value="提交订单" />
            <span class="fr mt-10 mr-10">还应支付：￥1900.00</span>
        </div>
    </div>
    <script type="text/javascript" src="../js/jquery-1.9.1.min.js"></script>
    <script>
    	$(function(){
    		initdata();
    		$('.new-address').click(function(){
    			$('.add-revece').show();
				$('.receive-li').hide();
				$('.new-address').hide();
    		});
    		$('.orther-rece').click(function(){
    			$('.receive-li li').show();
    		});
    		$('.btn-sub').click(function(){
    			$.ajax({
        			type: "POST",
        			url: "http://localhost:8080/mysql/order/add.json",
        			data:{
        				userName:localStorage.username,
        				list:localStorage.list,
        				addressId:$('.receive-li li.active').find('.productId').val()
        			},
        			dataType: "json",
        			success: function(data){
        				if('0000'==data.respCode){
        					widow.location.href="";
        				}
        			}
    			});
    		})
    		$('.add-ress').click(function(){
    			$.ajax({
        			type: "POST",
        			url: "http://localhost:8080/mysql/address/add.json",
        			data:{
        				userName:localStorage.username,
        				addressStreet:$('.prvience option:selected').text()+$('.city option:selected').text()+$('.city-qu option:selected').text(),
        				addressInfo:$('.ress-xiangxi').val(),
        				receivePhone:$('.reveice-man').val(),
        				receiveMan:$('.reveice-phone').val()
        			},
        			dataType: "json",
        			success: function(data){
        				if('0000'==data.respCode){
        					$('.add-revece').hide();
        					$('.receive-li').show();
        					$('.new-address').show();
        					initdata();
        				}
        			}
    			});
    		});
    	})
    	$('.receive-li li').live('click',function(){
    			$('.receive-li li').hide();
    			$(this).addClass('active');
    			$(this).show();
    		})
    	function initPro(){
    		var list  = localStorage.list;
    		var json = eval("("+list+")")
    		var arr = json.list;
    		for(var i=0;i<arr.length;i++){
    			arr[i].productId;
    		}
    	}
    	function initdata(){
    			$.ajax({
        			type: "POST",
        			url: "http://localhost:8080/mysql/address/query.json",
        			data:{
        				userName:localStorage.username,
        			},
        			dataType: "json",
        			success: function(data){
        				if('0000'==data.respCode){
        					var str = '';
        					if(data.list.length>0){
	        					for(var i=0;i<data.list.length;i++){
	        						str = str + '<li><span class="fl ">收货地址'+i+'</span>';
	        						str = str + '<input type="hidden" class="addressId" value="'+data.list[i].addressId+'" />';
	        						str = str + '<div class="fl ml-10"><span class="receive-man">'+data.list[i].receiveMan+'</span>';
	        						str = str + '<span class="address-street">'+data.list[i].addressStreet+'</span>';
	        						str = str + ' <span class="address-info">'+data.list[i].addressInfo+'</span>';
	        						str = str + ' <span class="receive-phone">'+data.list[i].receivePhone+'</span></div></li>';
	        					}
	        					$('.add-revece').hide('hide');
	        					$('.new-address').show();
	        					$('.receive-li').show();//('hide');
	        					$('.receive-li').children('li').remove();
	        					$('.receive-li').append(str);
	        					if(data.list.length>1){
	        						for(var i=1;i<$('.receive-li li').length;i++){
	        							$('.receive-li li').eq(i).hide();
	        						}
	        					}
        					}else{
        					}
        				}
        			}
    			});
    	}
    </script>
</body>
</html>
